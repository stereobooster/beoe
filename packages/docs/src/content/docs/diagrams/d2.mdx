---
title: "@beoe/rehype-d2"
---

import { PackageManagers } from "starlight-package-managers";
import { Tabs, TabItem } from "@astrojs/starlight/components";

Rehype plugin to generate [D2](https://d2lang.com/) diagrams in place of code fences. Example:

<Tabs>
  <TabItem label="Diagram">

```d2 pad=10
direction: right
x.y.z -> a.b.c: Label
```

  </TabItem>
  <TabItem label="Markdown">

````md
```d2 pad=10
direction: right
x.y.z -> a.b.c: Label
```
````

  </TabItem>
</Tabs>

## Installation

<PackageManagers pkg="@beoe/rehype-d2" />

You need to install D2 as well:

```sh
curl -fsSL https://d2lang.com/install.sh | sh -s --
```

## Usage

```js
import rehypeD2 from "@beoe/rehype-d2";

const html = await unified()
  .use(remarkParse)
  .use(remarkRehype)
  .use(rehypeD2, {
    /* options */
  })
  .use(rehypeStringify)
  .process(`markdown`);
```

Check out other [options](/start-here/configuration/).

### Configuration

You probaly want to use [`file`](/start-here/strategy/#file) strategy and one of dark schemes (`class` or `media`). Unless you need [interactivity](/start-here/interactivity/).

## Tips

### Note about Netlify

You can create small Netlify plugin to install D2. See example [here](https://github.com/stereobooster/beoe/tree/main/plugins/netlify-plugin-d2)

## Issues

- [ ] [Support links in connections](https://github.com/terrastruct/d2/pull/1955)
- [ ] [JS package](https://github.com/terrastruct/d2/discussions/234#discussioncomment-11286029)
- [ ] [Remove embeded fonts](https://github.com/terrastruct/d2/discussions/132)
- [ ] [Smaller embeded icons](https://github.com/terrastruct/d2/discussions/2223)
- [ ] [Export JSON graph](https://github.com/terrastruct/d2/discussions/2224)
- [ ] [Class-based dark mode](https://github.com/terrastruct/d2/discussions/2225)
- [ ] Link resolution callback

## TODO

- [ ] add documentation about `d2Options`
