---
import { renderGraphviz } from "@datt/rehype-graphviz";
import { getCache } from "@datt/cache";

const cache = await getCache();

interface Props {
  code: string;
}

let svg: string;
svg = cache.get(Astro.props.code);
if (svg === undefined) {
  svg = await renderGraphviz({ code: Astro.props.code });
  cache.set(Astro.props.code, svg);
}
---

<Fragment set:html={svg} />
